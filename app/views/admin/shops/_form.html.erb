<%= form_with(model: shop, local: true) do |form| %>
  <% if shop.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(shop.errors.count, "error") %> prohibited this shop from being saved:</h2>

      <ul>
      <% shop.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>

  <div class="field">
    <%= form.label :address %>
    <%= form.text_field :address %>
  </div>

  <%= form.hidden_field :latitude, :id => 'map_latitude'%>
  <%= form.hidden_field :longitude, :id => 'map_longitude'%>


  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>

<div id="map"></div>

<style>
  html { height: 100% }
  body { height: 100% }
  #map { height: 60%; width: 100%; }
</style>

<script>
 function initMap() {
   map = new google.maps.Map(document.getElementById('map'), {
     center: {lat: 39.13960294778968, lng: 141.14624841562465},
     zoom: 13
   });
 }
</script>
<script async defer src="//maps.googleapis.com/maps/api/js?key=<%= ENV.fetch("GOOGLE_MAP_API_KEY") %>&callback=initMap" type="text/javascript"></script>
